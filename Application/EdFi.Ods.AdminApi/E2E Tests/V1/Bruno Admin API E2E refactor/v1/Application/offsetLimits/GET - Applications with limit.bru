meta {
  name: Applications with limit
  type: http
  seq: 2
}

get {
  url: {{API_URL}}/v1/applications?limit=5
  body: none
  auth: inherit
}

params:query {
  limit: 5
}

script:post-response {
  test("Status code is OK", function () {
      expect(res.getStatus()).to.equal(200);
  });
  
  const response = res.getBody();
  
  test("Response is not null", function () {
      expect(response).to.not.be.null;
      expect(response).to.not.be.undefined;
  });
  
  test("Response matches success format", function () {
      expect(response).to.have.property("title");
      expect(response).to.have.property("result");
  });
  
  if (response && response.result) {
    const results = response.result;
    
    test("Response result includes applications", function () {
        expect(results.length).to.eql(5);
    });
  } else {
    test("Response result is missing", function () {
        throw new Error("Response or result property is null/undefined");
    });
  }
  
}

settings {
  encodeUrl: true
}
